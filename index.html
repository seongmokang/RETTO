<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î°úÎòê 6/45 Ïä§Ï∫êÎÑà</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // ÏïÑÏù¥ÏΩò Ïª¥Ìè¨ÎÑåÌä∏Îì§
        const Camera = () => (
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        );

        const CheckCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const XCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const Trophy = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
            </svg>
        );

        const Scan = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" />
            </svg>
        );

        function LottoScanner() {
            const [scanMode, setScanMode] = useState(false);
            const [scannedNumbers, setScannedNumbers] = useState([]);
            const [latestWinningNumbers, setLatestWinningNumbers] = useState(null);
            const [checkResult, setCheckResult] = useState(null);
            const [allGamesResults, setAllGamesResults] = useState([]);
            const [manualInput, setManualInput] = useState(['', '', '', '', '', '']);
            const [cameraLoading, setCameraLoading] = useState(false);
            const [debugInfo, setDebugInfo] = useState('');
            const [shouldStartCamera, setShouldStartCamera] = useState(false);
            const [isLoadingWinningNumbers, setIsLoadingWinningNumbers] = useState(false);
            const [user, setUser] = useState(null);
            const [sessionToken, setSessionToken] = useState(null);
            const videoRef = useRef(null);
            const canvasRef = useRef(null);
            const streamRef = useRef(null);
            const animationRef = useRef(null);

            // API Í∏∞Î≥∏ URL (Î∞∞Ìè¨ ÌôòÍ≤ΩÏóêÏÑúÎäî ÌòÑÏû¨ ÎèÑÎ©îÏù∏ ÏÇ¨Ïö©, Î°úÏª¨ÏóêÏÑúÎäî localhost)
            const API_BASE_URL = window.location.hostname === 'localhost'
                ? 'http://localhost:5002'
                : window.location.origin;

            useEffect(() => {
                // ÏÑ∏ÏÖò ÌÜ†ÌÅ∞ ÌôïÏù∏
                const storedToken = localStorage.getItem('sessionToken');
                if (storedToken) {
                    setSessionToken(storedToken);
                    fetchUserInfo(storedToken);
                }

                return () => {
                    if (animationRef.current) {
                        cancelAnimationFrame(animationRef.current);
                    }
                    stopCamera();
                };
            }, []);

            // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
            const fetchUserInfo = async (token) => {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/auth/me`, {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    const data = await response.json();

                    if (data.success) {
                        setUser(data.data);
                    } else {
                        // ÌÜ†ÌÅ∞Ïù¥ Ïú†Ìö®ÌïòÏßÄ ÏïäÏúºÎ©¥ Ï†úÍ±∞
                        localStorage.removeItem('sessionToken');
                        setSessionToken(null);
                    }
                } catch (error) {
                    console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï°∞Ìöå Ïã§Ìå®:', error);
                }
            };

            // Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏
            const handleKakaoLogin = async () => {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/auth/kakao/login`);
                    const data = await response.json();

                    if (data.success) {
                        window.location.href = data.auth_url;
                    } else {
                        alert('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                    }
                } catch (error) {
                    console.error('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏ Ïã§Ìå®:', error);
                    alert('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
                }
            };

            // Î°úÍ∑∏ÏïÑÏõÉ
            const handleLogout = async () => {
                try {
                    await fetch(`${API_BASE_URL}/api/auth/logout`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${sessionToken}`
                        }
                    });

                    localStorage.removeItem('sessionToken');
                    setSessionToken(null);
                    setUser(null);
                } catch (error) {
                    console.error('Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®:', error);
                }
            };

            // Ïä§Ï∫î Ïù¥Î†• Ï†ÄÏû•
            const saveScanHistory = async (round, numbers, result, uniqueId = null) => {
                if (!sessionToken) return null;

                try {
                    const response = await fetch(`${API_BASE_URL}/api/scan/history`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${sessionToken}`
                        },
                        body: JSON.stringify({
                            round,
                            numbers,
                            matched_count: result.matches,
                            rank: result.rank,
                            prize_amount: result.prize,
                            has_bonus: result.hasBonus,
                            unique_id: uniqueId
                        })
                    });

                    const data = await response.json();
                    if (data.success) {
                        // history_idÏôÄ point_ynÏùÑ Ìï®Íªò Î∞òÌôò
                        return {
                            history_id: data.data.history_id,
                            point_yn: data.data.point_yn
                        };
                    }
                    return null;
                } catch (error) {
                    console.error('Ïä§Ï∫î Ïù¥Î†• Ï†ÄÏû• Ïã§Ìå®:', error);
                    return null;
                }
            };

            // APIÏóêÏÑú ÎãπÏ≤® Î≤àÌò∏ Í∞ÄÏ†∏Ïò§Í∏∞
            const fetchWinningNumbers = async (round) => {
                setIsLoadingWinningNumbers(true);
                try {
                    console.log(`üîç ${round}ÌöåÏ∞® ÎãπÏ≤® Î≤àÌò∏ Ï°∞Ìöå Ï§ë...`);
                    const response = await fetch(`${API_BASE_URL}/api/lotto/${round}`);
                    const data = await response.json();

                    if (data.success) {
                        console.log('‚úÖ ÎãπÏ≤® Î≤àÌò∏ Ï°∞Ìöå ÏÑ±Í≥µ:', data.data);
                        const winningData = {
                            round: data.data.round,
                            numbers: data.data.numbers,
                            bonus: data.data.bonus,
                            date: data.data.date || new Date().toLocaleDateString('ko-KR')
                        };
                        setLatestWinningNumbers(winningData);
                        return winningData;
                    } else {
                        console.error('‚ùå API ÏóêÎü¨:', data.error);
                        alert(`ÎãπÏ≤® Î≤àÌò∏ Ï°∞Ìöå Ïã§Ìå®: ${data.error}`);
                        return null;
                    }
                } catch (error) {
                    console.error('‚ùå ÎÑ§Ìä∏ÏõåÌÅ¨ ÏóêÎü¨:', error);
                    alert(`ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå®: ${error.message}\n\nAPI ÏÑúÎ≤ÑÍ∞Ä Ïã§Ìñâ Ï§ëÏù∏ÏßÄ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.\n(python api_server.py)`);
                    return null;
                } finally {
                    setIsLoadingWinningNumbers(false);
                }
            };

            // Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî Ìï®ÏàòÎ•º Î®ºÏ†Ä Ï†ïÏùò
            const initializeCamera = async () => {
                console.log('üé¨ Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî ÏãúÏûë...');

                try {
                    console.log('üì± ÌõÑÎ©¥ Ïπ¥Î©îÎùº ÏöîÏ≤≠ Ï§ë...');
                    let stream;

                    // Î®ºÏ†Ä ÌõÑÎ©¥ Ïπ¥Î©îÎùº ÏãúÎèÑ
                    try {
                        stream = await navigator.mediaDevices.getUserMedia({
                            video: {
                                facingMode: { ideal: 'environment' },
                                width: { ideal: 1280 },
                                height: { ideal: 720 }
                            }
                        });
                        console.log('‚úÖ ÌõÑÎ©¥ Ïπ¥Î©îÎùº Ï†ëÍ∑º ÏÑ±Í≥µ');
                        setDebugInfo('ÌõÑÎ©¥ Ïπ¥Î©îÎùº Ïó∞Í≤∞Îê®');
                    } catch (err) {
                        // ÌõÑÎ©¥ Ïπ¥Î©îÎùº Ïã§Ìå® Ïãú ÏùºÎ∞ò Ïπ¥Î©îÎùºÎ°ú Ïû¨ÏãúÎèÑ
                        console.warn('‚ö†Ô∏è ÌõÑÎ©¥ Ïπ¥Î©îÎùº Ïã§Ìå®, ÏùºÎ∞ò Ïπ¥Î©îÎùº ÏãúÎèÑ:', err.message);
                        stream = await navigator.mediaDevices.getUserMedia({
                            video: {
                                width: { ideal: 1280 },
                                height: { ideal: 720 }
                            }
                        });
                        console.log('‚úÖ ÏùºÎ∞ò Ïπ¥Î©îÎùº Ï†ëÍ∑º ÏÑ±Í≥µ');
                        setDebugInfo('Ï†ÑÎ©¥ Ïπ¥Î©îÎùº Ïó∞Í≤∞Îê®');
                    }

                    console.log('üîç videoRef.current ÌôïÏù∏:', videoRef.current);
                    console.log('üîç stream ÌôïÏù∏:', stream);
                    console.log('üîç stream tracks:', stream ? stream.getTracks() : 'no stream');

                    if (!videoRef.current) {
                        console.error('‚ùå videoRef.currentÍ∞Ä Ïó¨Ï†ÑÌûà nullÏûÖÎãàÎã§');
                        setDebugInfo('ÎπÑÎîîÏò§ ÏóòÎ¶¨Î®ºÌä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        setCameraLoading(false);
                        setScanMode(false);
                        if (stream) {
                            stream.getTracks().forEach(track => track.stop());
                        }
                        return;
                    }

                    console.log('üé¨ ÎπÑÎîîÏò§ ÏóòÎ¶¨Î®ºÌä∏Ïóê Ïä§Ìä∏Î¶º Ïó∞Í≤∞...');
                    videoRef.current.srcObject = stream;
                    streamRef.current = stream;

                    // ÎπÑÎîîÏò§ Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£åÎ•º Í∏∞Îã§Î¶º
                    videoRef.current.onloadedmetadata = () => {
                        console.log('‚úÖ ÎπÑÎîîÏò§ Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Î°úÎìú ÏôÑÎ£å');
                        console.log(`üìê ÎπÑÎîîÏò§ ÌÅ¨Í∏∞: ${videoRef.current.videoWidth}x${videoRef.current.videoHeight}`);

                        videoRef.current.play()
                            .then(() => {
                                console.log('‚ñ∂Ô∏è ÎπÑÎîîÏò§ Ïû¨ÏÉù ÏãúÏûë');
                                setCameraLoading(false);
                                setDebugInfo('Ïä§Ï∫î Ï§ë...');
                                scanQRCode();
                            })
                            .catch((playErr) => {
                                console.error('‚ùå ÎπÑÎîîÏò§ Ïû¨ÏÉù Ïã§Ìå®:', playErr);
                                setDebugInfo(`Ïû¨ÏÉù Ïã§Ìå®: ${playErr.message}`);
                                setCameraLoading(false);
                                stopCamera();
                            });
                    };

                    videoRef.current.onerror = (err) => {
                        console.error('‚ùå ÎπÑÎîîÏò§ ÏóòÎ¶¨Î®ºÌä∏ ÏóêÎü¨:', err);
                        setDebugInfo('ÎπÑÎîîÏò§ Î°úÎìú Ïã§Ìå®');
                        setCameraLoading(false);
                        stopCamera();
                    };
                } catch (err) {
                    console.error('‚ùå Ïπ¥Î©îÎùº Ï†ëÍ∑º Ïã§Ìå®:', err);
                    let errorMsg = 'Ïπ¥Î©îÎùº Ï†ëÍ∑º Í∂åÌïúÏù¥ ÌïÑÏöîÌï©ÎãàÎã§: ' + err.message;

                    if (err.name === 'NotAllowedError') {
                        errorMsg = 'Ïπ¥Î©îÎùº Í∂åÌïúÏù¥ Í±∞Î∂ÄÎêòÏóàÏäµÎãàÎã§. Î∏åÎùºÏö∞Ï†Ä ÏÑ§Ï†ïÏóêÏÑú Ïπ¥Î©îÎùº Í∂åÌïúÏùÑ ÌóàÏö©Ìï¥Ï£ºÏÑ∏Ïöî.';
                    } else if (err.name === 'NotFoundError') {
                        errorMsg = 'Ïπ¥Î©îÎùºÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. Í∏∞Í∏∞Ïóê Ïπ¥Î©îÎùºÍ∞Ä Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÎäîÏßÄ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.';
                    } else if (err.name === 'NotReadableError') {
                        errorMsg = 'Ïπ¥Î©îÎùºÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. Îã§Î•∏ Ïï±ÏóêÏÑú ÏÇ¨Ïö© Ï§ëÏùº Ïàò ÏûàÏäµÎãàÎã§.';
                    }

                    alert(errorMsg);
                    setDebugInfo(errorMsg);
                    setCameraLoading(false);
                    setScanMode(false);
                }
            };

            // scanModeÍ∞Ä trueÎ°ú Î≥ÄÍ≤ΩÎêòÍ≥† shouldStartCameraÍ∞Ä trueÏùº Îïå Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî
            useEffect(() => {
                console.log('üîÑ useEffect Ïã§Ìñâ:', { shouldStartCamera, scanMode, hasVideoRef: !!videoRef.current });

                if (shouldStartCamera && scanMode) {
                    // videoRefÍ∞Ä Ï§ÄÎπÑÎêòÏßÄ ÏïäÏïòÎã§Î©¥ ÏßßÏùÄ ÎîúÎ†àÏù¥ ÌõÑ Ïû¨ÏãúÎèÑ
                    if (!videoRef.current) {
                        console.warn('‚è≥ videoRefÍ∞Ä ÏïÑÏßÅ Ï§ÄÎπÑÎêòÏßÄ ÏïäÏùå, 50ms ÌõÑ Ïû¨ÏãúÎèÑ');
                        const timeout = setTimeout(() => {
                            if (videoRef.current) {
                                console.log('‚úÖ useEffect (Ïû¨ÏãúÎèÑ): videoRefÍ∞Ä Ï§ÄÎπÑÎê®, Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî ÏãúÏûë');
                                initializeCamera();
                                setShouldStartCamera(false);
                            } else {
                                console.error('‚ùå videoRefÍ∞Ä Ïó¨Ï†ÑÌûà null, Îã§Ïãú Ïû¨ÏãúÎèÑ');
                                // Ìïú Î≤à Îçî Ïû¨ÏãúÎèÑ
                                setTimeout(() => {
                                    if (videoRef.current) {
                                        console.log('‚úÖ useEffect (2Ï∞® Ïû¨ÏãúÎèÑ): videoRefÍ∞Ä Ï§ÄÎπÑÎê®, Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî ÏãúÏûë');
                                        initializeCamera();
                                        setShouldStartCamera(false);
                                    } else {
                                        console.error('‚ùå videoRef Ï¥àÍ∏∞Ìôî Ïã§Ìå®');
                                        setCameraLoading(false);
                                        setScanMode(false);
                                        setShouldStartCamera(false);
                                        setDebugInfo('ÎπÑÎîîÏò§ ÏóòÎ¶¨Î®ºÌä∏ Ï¥àÍ∏∞Ìôî Ïã§Ìå®');
                                    }
                                }, 100);
                            }
                        }, 50);
                        return () => clearTimeout(timeout);
                    } else {
                        console.log('‚úÖ useEffect: videoRefÍ∞Ä Ï§ÄÎπÑÎê®, Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî ÏãúÏûë');
                        initializeCamera();
                        setShouldStartCamera(false);
                    }
                }
            }, [scanMode, shouldStartCamera]);

            // Ïπ¥Î©îÎùº ÏãúÏûë Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
            const startCamera = () => {
                console.log('üé• Ïπ¥Î©îÎùº ÏãúÏûë ÏöîÏ≤≠...');

                // Î∏åÎùºÏö∞Ï†Ä Ìò∏ÌôòÏÑ± Ï≤¥ÌÅ¨
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    const errorMsg = 'Ïù¥ Î∏åÎùºÏö∞Ï†ÄÎäî Ïπ¥Î©îÎùºÎ•º ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.';
                    alert(errorMsg);
                    setDebugInfo(errorMsg);
                    console.error('‚ùå MediaDevices APIÎ•º ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§');
                    return;
                }

                setDebugInfo('Ïπ¥Î©îÎùº Ï¥àÍ∏∞Ìôî Ï§ë...');
                setCameraLoading(true);
                setScanMode(true);
                setShouldStartCamera(true);
            };

            // Ïπ¥Î©îÎùº Ï§ëÏßÄ
            const stopCamera = () => {
                console.log('üõë Ïπ¥Î©îÎùº Ï§ëÏßÄ');
                if (streamRef.current) {
                    streamRef.current.getTracks().forEach(track => {
                        track.stop();
                        console.log('üîå Ïπ¥Î©îÎùº Ìä∏Îûô Ï§ëÏßÄ:', track.kind);
                    });
                    streamRef.current = null;
                }
                if (animationRef.current) {
                    cancelAnimationFrame(animationRef.current);
                }
                if (videoRef.current) {
                    videoRef.current.srcObject = null;
                }
                setScanMode(false);
                setCameraLoading(false);
                setDebugInfo('');
            };

            // QR ÏΩîÎìú Ïä§Ï∫î
            const scanQRCode = () => {
                if (!videoRef.current || !canvasRef.current) {
                    console.warn('‚ö†Ô∏è videoRef ÎòêÎäî canvasRefÍ∞Ä ÏóÜÏùå');
                    return;
                }

                const video = videoRef.current;
                const canvas = canvasRef.current;
                const context = canvas.getContext('2d');

                if (video.readyState === video.HAVE_ENOUGH_DATA) {
                    canvas.height = video.videoHeight;
                    canvas.width = video.videoWidth;
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);

                    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                    const code = jsQR(imageData.data, imageData.width, imageData.height);

                    if (code) {
                        console.log('‚úÖ QR ÏΩîÎìú Í∞êÏßÄ:', code.data);
                        handleQRCodeDetected(code.data);
                        stopCamera();
                        return;
                    }
                }

                if (scanMode) {
                    animationRef.current = requestAnimationFrame(scanQRCode);
                }
            };

            // QR ÏΩîÎìú Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
            const handleQRCodeDetected = async (data) => {
                try {
                    console.log('üìÑ QR ÏΩîÎìú ÏõêÎ≥∏ Îç∞Ïù¥ÌÑ∞:', data);

                    // Î°úÎòê QR ÏΩîÎìú ÌååÏã±
                    // ÌòïÏãù: https://m.dhlottery.co.kr/qr.do?method=winQr&v=1194q011219222440q070927394243q030607303244q141825294041q081112134143
                    // v= Îí§Ïóê ÌöåÏ∞®, qÎ°ú Íµ¨Î∂ÑÎêú Í∞Å Í≤åÏûÑÏùò Î≤àÌò∏Îì§ (2ÏûêÎ¶¨Ïî©), ÎßàÏßÄÎßâ 10ÏûêÎ¶¨Îäî Í≥†Ïú†Î≤àÌò∏

                    // URLÏóêÏÑú ÌååÎùºÎØ∏ÌÑ∞ Ï∂îÏ∂ú
                    const urlParams = new URLSearchParams(data.split('?')[1]);
                    const qrValue = urlParams.get('v');

                    if (!qrValue) {
                        alert('Ïò¨Î∞îÎ•∏ Î°úÎòê QR ÏΩîÎìúÍ∞Ä ÏïÑÎãôÎãàÎã§.');
                        return;
                    }

                    console.log('üéØ QR Í∞í:', qrValue);

                    // ÎßàÏßÄÎßâ 10ÏûêÎ¶¨Îäî Í≥†Ïú† Î≤àÌò∏Î°ú Î∂ÑÎ¶¨
                    const uniqueId = qrValue.slice(-10);
                    const dataWithoutUniqueId = qrValue.slice(0, -10);

                    console.log('üîë Í≥†Ïú† Î≤àÌò∏:', uniqueId);
                    console.log('üé≤ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞:', dataWithoutUniqueId);

                    // qÎ°ú Î∂ÑÎ¶¨ (Ï≤´ Î≤àÏß∏Îäî ÌöåÏ∞®, ÎÇòÎ®∏ÏßÄÎäî Í≤åÏûÑÎ≥Ñ Î≤àÌò∏)
                    const parts = dataWithoutUniqueId.split('q');
                    const round = parseInt(parts[0]); // ÌöåÏ∞®
                    const games = parts.slice(1); // Í≤åÏûÑÎì§

                    console.log('üé≤ ÌöåÏ∞®:', round);
                    console.log('üéÆ Í≤åÏûÑ Ïàò:', games.length);

                    if (games.length === 0) {
                        alert('Î°úÎòê Î≤àÌò∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                        return;
                    }

                    // APIÏóêÏÑú Ìï¥Îãπ ÌöåÏ∞®Ïùò ÎãπÏ≤® Î≤àÌò∏ Í∞ÄÏ†∏Ïò§Í∏∞
                    setDebugInfo(`${round}ÌöåÏ∞® ÎãπÏ≤® Î≤àÌò∏ Ï°∞Ìöå Ï§ë...`);
                    const winningData = await fetchWinningNumbers(round);

                    if (!winningData) {
                        // API Ï°∞Ìöå Ïã§Ìå®
                        return;
                    }

                    // Î™®Îì† Í≤åÏûÑÏùò Î≤àÌò∏ Ï∂îÏ∂ú
                    const allGames = [];
                    games.forEach((game, gameIndex) => {
                        console.log(`üîç Í≤åÏûÑ ${gameIndex + 1} ÏõêÎ≥∏:`, game, `(Í∏∏Ïù¥: ${game.length})`);

                        const numbers = [];
                        // Í∞Å Í≤åÏûÑÏùÄ 12ÏûêÎ¶¨ (6Í∞ú Î≤àÌò∏ x 2ÏûêÎ¶¨)
                        const gameData = game.substring(0, 12);

                        // 2ÏûêÎ¶¨Ïî© Î∂ÑÎ¶¨ (01, 12, 19, 22, 24, 40)
                        for (let i = 0; i < gameData.length && i < 12; i += 2) {
                            const numStr = gameData.substring(i, i + 2);
                            const num = parseInt(numStr, 10);
                            if (num >= 1 && num <= 45) {
                                numbers.push(num);
                            } else {
                                console.warn(`‚ö†Ô∏è Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Î≤àÌò∏: ${numStr} (${num})`);
                            }
                        }

                        if (numbers.length === 6) {
                            const sorted = numbers.sort((a, b) => a - b);
                            allGames.push(sorted);
                            console.log(`üé∞ Í≤åÏûÑ ${gameIndex + 1}:`, sorted);
                        } else {
                            console.warn(`‚ö†Ô∏è Í≤åÏûÑ ${gameIndex + 1}Ïùò Î≤àÌò∏Í∞Ä ${numbers.length}Í∞úÏûÖÎãàÎã§ (6Í∞ú ÌïÑÏöî):`, numbers);
                        }
                    });

                    if (allGames.length === 0) {
                        alert('Ïò¨Î∞îÎ•∏ Î°úÎòê Î≤àÌò∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                        return;
                    }

                    console.log(`‚úÖ Ï¥ù ${allGames.length}Í∞ú Í≤åÏûÑ Ïù∏Ïãù ÏôÑÎ£å`);

                    // Î™®Îì† Í≤åÏûÑÏùò ÎãπÏ≤® Í≤∞Í≥º ÌôïÏù∏
                    const allResults = await Promise.all(allGames.map(async (numbers, index) => {
                        const result = checkLottoNumbersForGame(numbers, winningData);
                        console.log(`üé≤ Í≤åÏûÑ ${index + 1} ÎãπÏ≤® Í≤∞Í≥º:`, result);

                        // Ïä§Ï∫î Ïù¥Î†• Ï†ÄÏû• (Î°úÍ∑∏Ïù∏Ìïú Í≤ΩÏö∞Îßå)
                        let historyId = null;
                        let pointYn = false;
                        if (sessionToken) {
                            const scanResult = await saveScanHistory(round, numbers, result, uniqueId);
                            if (scanResult) {
                                historyId = scanResult.history_id;
                                pointYn = scanResult.point_yn;
                            }
                        }

                        return {
                            gameNumber: index + 1,
                            numbers: numbers,
                            historyId: historyId,
                            pointYn: pointYn,
                            ...result
                        };
                    }));

                    console.log('üìä Ï†ÑÏ≤¥ Í≤åÏûÑ Í≤∞Í≥º:', allResults);
                    setAllGamesResults(allResults);

                    // Ï≤´ Î≤àÏß∏ Í≤åÏûÑÏùÑ Í∏∞Î≥∏ÏúºÎ°ú ÌëúÏãú
                    setScannedNumbers(allGames[0]);
                    setCheckResult(allResults[0]);
                    setDebugInfo('ÎãπÏ≤® ÌôïÏù∏ ÏôÑÎ£å');

                } catch (err) {
                    console.error('‚ùå QR ÏΩîÎìú ÌååÏã± ÏóêÎü¨:', err);
                    alert('QR ÏΩîÎìú ÏùΩÍ∏∞ Ïã§Ìå®: ' + err.message);
                }
            };

            // ÎãπÏ≤® ÌôïÏù∏ (Í≤∞Í≥º Î∞òÌôò)
            const checkLottoNumbersForGame = (numbers, winningNumbers = null) => {
                // winningNumbersÍ∞Ä Ï†ÑÎã¨ÎêòÏßÄ ÏïäÏúºÎ©¥ stateÏóêÏÑú Í∞ÄÏ†∏Ïò¥
                const winning = winningNumbers || latestWinningNumbers;

                if (!winning) {
                    console.warn('‚ö†Ô∏è ÎãπÏ≤® Î≤àÌò∏Í∞Ä ÏóÜÏäµÎãàÎã§');
                    return {
                        matches: 0,
                        hasBonus: false,
                        rank: null,
                        prize: null
                    };
                }

                console.log('üîç ÎãπÏ≤® Î≤àÌò∏:', winning.numbers);
                console.log('üéØ ÌôïÏù∏Ìï† Î≤àÌò∏:', numbers);

                // ÏùºÏπòÌïòÎäî Î≤àÌò∏ Ï∞æÍ∏∞
                const matchedNumbers = numbers.filter(n =>
                    winning.numbers.includes(n)
                );

                const matches = matchedNumbers.length;
                const hasBonus = numbers.includes(winning.bonus);

                console.log('‚úÖ ÏùºÏπòÌïú Î≤àÌò∏:', matchedNumbers);
                console.log('üìä ÏùºÏπò Í∞úÏàò:', matches);
                console.log('üéÅ Î≥¥ÎÑàÏä§ ÏùºÏπò:', hasBonus);

                let rank = null;
                let prize = null;

                if (matches === 6) {
                    rank = 1;
                    prize = 'ÏïΩ 20ÏñµÏõê (ÌöåÏ∞®Î≥Ñ ÏÉÅÏù¥)';
                } else if (matches === 5 && hasBonus) {
                    rank = 2;
                    prize = 'ÏïΩ 5Ï≤úÎßåÏõê (ÌöåÏ∞®Î≥Ñ ÏÉÅÏù¥)';
                } else if (matches === 5) {
                    rank = 3;
                    prize = 'ÏïΩ 150ÎßåÏõê';
                } else if (matches === 4) {
                    rank = 4;
                    prize = '5ÎßåÏõê';
                } else if (matches === 3) {
                    rank = 5;
                    prize = '5Ï≤úÏõê';
                }

                return {
                    matches,
                    hasBonus,
                    rank,
                    prize,
                    matchedNumbers  // ÎîîÎ≤ÑÍπÖÏö©ÏúºÎ°ú ÏùºÏπòÌïú Î≤àÌò∏ÎèÑ Î∞òÌôò
                };
            };

            // ÎãπÏ≤® ÌôïÏù∏ (ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏)
            const checkLottoNumbers = (numbers) => {
                const result = checkLottoNumbersForGame(numbers);
                setCheckResult(result);
                setAllGamesResults([]); // ÏàòÎèô ÏûÖÎ†• Ïãú Îã®Ïùº Í≤∞Í≥ºÎßå ÌëúÏãú
            };

            // Î≤àÌò∏ ÏÉâÏÉÅ (Î°úÎòê Í≥µÏãù ÏÉâÏÉÅ)
            const getNumberColor = (num) => {
                if (num <= 10) return 'bg-yellow-400 text-gray-900';
                if (num <= 20) return 'bg-blue-500 text-white';
                if (num <= 30) return 'bg-red-500 text-white';
                if (num <= 40) return 'bg-gray-600 text-white';
                return 'bg-green-500 text-white';
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-2xl mx-auto">
                        {/* Ìó§Îçî */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="flex items-center">
                                    <Trophy className="w-8 h-8 text-yellow-500 mr-2" />
                                    <h1 className="text-3xl font-bold text-gray-800">Î°úÎòê 6/45 Ïä§Ï∫êÎÑà</h1>
                                </div>
                                {user ? (
                                    <div className="flex items-center gap-3">
                                        <img
                                            src={user.profile_image_url}
                                            alt="ÌîÑÎ°úÌïÑ"
                                            className="w-10 h-10 rounded-full cursor-pointer hover:ring-2 hover:ring-indigo-400 transition"
                                            onClick={() => window.location.href = 'history.html'}
                                        />
                                        <div className="text-sm">
                                            <p className="font-semibold text-gray-800">{user.nickname}</p>
                                            <div className="flex gap-2">
                                                <button onClick={() => window.location.href = 'retto_points.html'} className="text-yellow-600 hover:text-yellow-800 text-xs font-semibold">
                                                    Î¶¨Îòê Ìè¨Ïù∏Ìä∏
                                                </button>
                                                <span className="text-gray-300">|</span>
                                                <button onClick={() => window.location.href = 'history.html'} className="text-indigo-600 hover:text-indigo-800 text-xs">
                                                    Ïä§Ï∫î Ïù¥Î†•
                                                </button>
                                                <span className="text-gray-300">|</span>
                                                <button onClick={handleLogout} className="text-red-500 hover:text-red-700 text-xs">
                                                    Î°úÍ∑∏ÏïÑÏõÉ
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <button
                                        onClick={handleKakaoLogin}
                                        className="bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition"
                                    >
                                        <svg className="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 3C6.48 3 2 6.58 2 11c0 2.84 1.89 5.34 4.68 6.84-.2.73-.76 2.73-.88 3.17-.14.52.19.51.39.37.16-.11 2.54-1.77 3.52-2.45.76.11 1.56.16 2.37.16 5.52 0 10-3.58 10-8S17.52 3 12 3z"/>
                                        </svg>
                                    </button>
                                )}
                            </div>
                            <p className="text-center text-gray-600">
                                QR ÏΩîÎìúÎ•º Ïä§Ï∫îÌïòÏó¨ ÎãπÏ≤®ÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî
                            </p>
                        </div>

                        {/* ÏµúÏã† ÎãπÏ≤® Î≤àÌò∏ */}
                        {isLoadingWinningNumbers && (
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <div className="text-center">
                                    <div className="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"></div>
                                    <p className="text-gray-600">ÎãπÏ≤® Î≤àÌò∏ Ï°∞Ìöå Ï§ë...</p>
                                </div>
                            </div>
                        )}
                        {!isLoadingWinningNumbers && latestWinningNumbers && (
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">
                                    ÎãπÏ≤® Î≤àÌò∏ (Ï†ú{latestWinningNumbers.round}Ìöå)
                                </h2>
                                <div className="flex flex-wrap items-center justify-center gap-3 mb-2">
                                    {latestWinningNumbers.numbers.map((num, idx) => (
                                        <div
                                            key={idx}
                                            className={`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ${getNumberColor(num)}`}
                                        >
                                            {num}
                                        </div>
                                    ))}
                                    <span className="text-2xl text-gray-400 mx-2">+</span>
                                    <div
                                        className={`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold border-4 border-gray-300 ${getNumberColor(latestWinningNumbers.bonus)}`}
                                    >
                                        {latestWinningNumbers.bonus}
                                    </div>
                                </div>
                                <p className="text-center text-sm text-gray-500">
                                    Ï∂îÏ≤®Ïùº: {latestWinningNumbers.date}
                                </p>
                            </div>
                        )}

                        {/* QR Ïä§Ï∫î ÏÑπÏÖò */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <Scan className="w-6 h-6 mr-2" />
                                QR ÏΩîÎìú Ïä§Ï∫î
                            </h2>

                            {!scanMode ? (
                                <div>
                                    <button
                                        onClick={startCamera}
                                        disabled={cameraLoading}
                                        className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-2 transition disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        <Camera />
                                        Ïπ¥Î©îÎùº ÏãúÏûë
                                    </button>
                                    {debugInfo && (
                                        <div className="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                            <p className="text-sm text-yellow-800">{debugInfo}</p>
                                        </div>
                                    )}
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    <div className="relative bg-black rounded-lg overflow-hidden">
                                        <video
                                            ref={videoRef}
                                            autoPlay
                                            playsInline
                                            muted
                                            className="w-full"
                                        />
                                        {cameraLoading && (
                                            <div className="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50">
                                                <div className="text-center">
                                                    <div className="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4"></div>
                                                    <p className="text-white font-medium">{debugInfo}</p>
                                                </div>
                                            </div>
                                        )}
                                        <div className="absolute inset-0 border-4 border-white border-dashed m-8 rounded-lg pointer-events-none"></div>
                                        {debugInfo && !cameraLoading && (
                                            <div className="absolute top-2 left-2 right-2 bg-black bg-opacity-70 text-white text-sm px-3 py-2 rounded">
                                                {debugInfo}
                                            </div>
                                        )}
                                    </div>
                                    <button
                                        onClick={stopCamera}
                                        className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition"
                                    >
                                        Ïä§Ï∫î Ï§ëÏßÄ
                                    </button>
                                </div>
                            )}
                            <canvas ref={canvasRef} style={{ display: 'none' }} />
                        </div>

                        {/* Î™®Îì† Í≤åÏûÑ Í≤∞Í≥º ÌëúÏãú (QR Ïä§Ï∫î Ïãú) */}
                        {allGamesResults.length > 0 && (
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">
                                    Ï†ÑÏ≤¥ Í≤åÏûÑ ÎãπÏ≤® Í≤∞Í≥º ({allGamesResults.length}Í≤åÏûÑ)
                                </h2>
                                <div className="space-y-4">
                                    {allGamesResults.map((game, index) => (
                                        <div key={index} className={`border-2 rounded-lg p-4 ${
                                            game.rank ? 'border-yellow-500 bg-yellow-50' : 'border-gray-200'
                                        }`}>
                                            <div className="flex items-center justify-between mb-3">
                                                <div className="flex items-center gap-2">
                                                    <h3 className="text-lg font-bold text-gray-800">
                                                        Í≤åÏûÑ {game.gameNumber}
                                                    </h3>
                                                    {game.rank && (
                                                        <span className="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                            {game.rank}Îì± ÎãπÏ≤®!
                                                        </span>
                                                    )}
                                                </div>
                                                {user ? (
                                                    game.historyId ? (
                                                        game.pointYn ? (
                                                            <button
                                                                disabled
                                                                className="bg-gray-400 text-white font-bold py-2 px-4 rounded-lg text-sm opacity-50 cursor-not-allowed"
                                                            >
                                                                Î∞õÍ∏∞ÏôÑÎ£å
                                                            </button>
                                                        ) : (
                                                            <button
                                                                onClick={() => window.location.href = `ad.html?history_id=${game.historyId}`}
                                                                className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all transform hover:scale-105 shadow-md"
                                                            >
                                                                Î¶¨ÎòêÎ∞õÍ∏∞
                                                            </button>
                                                        )
                                                    ) : (
                                                        <button
                                                            disabled
                                                            className="bg-gray-400 text-white font-bold py-2 px-4 rounded-lg text-sm opacity-50 cursor-not-allowed"
                                                        >
                                                            Ï†ÄÏû• Ï§ë...
                                                        </button>
                                                    )
                                                ) : (
                                                    <button
                                                        onClick={handleKakaoLogin}
                                                        className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all transform hover:scale-105 shadow-md"
                                                    >
                                                        Î°úÍ∑∏Ïù∏ÌïòÍ≥† Î¶¨ÎòêÎ∞õÍ∏∞
                                                    </button>
                                                )}
                                            </div>
                                            <div className="flex flex-wrap items-center gap-2 mb-3">
                                                {game.numbers.map((num, idx) => {
                                                    const isMatched = latestWinningNumbers && latestWinningNumbers.numbers.includes(num);
                                                    const isBonus = latestWinningNumbers && num === latestWinningNumbers.bonus;
                                                    return (
                                                        <div
                                                            key={idx}
                                                            className={`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold relative ${getNumberColor(num)} ${
                                                                isMatched ? 'ring-4 ring-green-400' : isBonus ? 'ring-4 ring-orange-400' : ''
                                                            }`}
                                                        >
                                                            {num}
                                                            {isMatched && (
                                                                <span className="absolute -top-1 -right-1 text-green-600 text-xs">‚úì</span>
                                                            )}
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                            <div className="text-sm">
                                                {game.rank ? (
                                                    <div className="text-gray-800">
                                                        <p className="font-bold">‚úÖ {game.matches ?? 0}Í∞ú ÏùºÏπò{game.hasBonus && ' + Î≥¥ÎÑàÏä§'}</p>
                                                        {game.matchedNumbers && game.matchedNumbers.length > 0 && (
                                                            <p className="text-sm text-gray-600 mt-1">ÏùºÏπò: {game.matchedNumbers.join(', ')}</p>
                                                        )}
                                                        <p className="text-orange-600 font-bold mt-1">ÏòàÏÉÅ ÎãπÏ≤®Í∏à: {game.prize}</p>
                                                    </div>
                                                ) : (
                                                    <div>
                                                        <p className="text-gray-500">
                                                            ‚ùå {game.matches ?? 0}Í∞ú ÏùºÏπò (ÎÇôÏ≤®)
                                                        </p>
                                                        {game.matchedNumbers && game.matchedNumbers.length > 0 && (
                                                            <p className="text-sm text-gray-600 mt-1">ÏùºÏπò: {game.matchedNumbers.join(', ')}</p>
                                                        )}
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* Ïä§Ï∫îÎêú Î≤àÌò∏ ÌëúÏãú (ÏàòÎèô ÏûÖÎ†• Ïãú) */}
                        {scannedNumbers.length > 0 && allGamesResults.length === 0 && (
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">ÎÇ¥ Î≤àÌò∏</h2>
                                <div className="flex flex-wrap items-center justify-center gap-3">
                                    {scannedNumbers.map((num, idx) => (
                                        <div
                                            key={idx}
                                            className={`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ${getNumberColor(num)}`}
                                        >
                                            {num}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* ÎãπÏ≤® Í≤∞Í≥º (ÏàòÎèô ÏûÖÎ†• Ïãú) */}
                        {checkResult && allGamesResults.length === 0 && (
                            <div className={`rounded-lg shadow-lg p-6 ${
                                checkResult.rank ? 'bg-gradient-to-br from-yellow-400 to-orange-500' : 'bg-white'
                            }`}>
                                <div className="text-center">
                                    {checkResult.rank ? (
                                        <>
                                            <CheckCircle className="w-16 h-16 text-white mx-auto mb-4" />
                                            <h2 className="text-3xl font-bold text-white mb-2">
                                                üéâ {checkResult.rank}Îì± ÎãπÏ≤®! üéâ
                                            </h2>
                                            <p className="text-xl text-white mb-4">
                                                {checkResult.matches}Í∞ú Î≤àÌò∏ ÏùºÏπò
                                                {checkResult.hasBonus && ' + Î≥¥ÎÑàÏä§'}
                                            </p>
                                            <p className="text-2xl font-bold text-white">
                                                ÏòàÏÉÅ ÎãπÏ≤®Í∏à: {checkResult.prize}
                                            </p>
                                        </>
                                    ) : (
                                        <>
                                            <XCircle className="w-16 h-16 text-gray-400 mx-auto mb-4" />
                                            <h2 className="text-2xl font-bold text-gray-700 mb-2">
                                                ÎãπÏ≤®ÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§
                                            </h2>
                                            <p className="text-lg text-gray-600">
                                                ÏùºÏπòÌïòÎäî Î≤àÌò∏: {checkResult.matches}Í∞ú
                                            </p>
                                            <p className="text-sm text-gray-500 mt-2">
                                                (3Í∞ú Ïù¥ÏÉÅ ÏùºÏπòÌï¥Ïïº ÎãπÏ≤®Îê©ÎãàÎã§)
                                            </p>
                                        </>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* ÏïàÎÇ¥ ÏÇ¨Ìï≠ */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mt-6">
                            <h3 className="text-lg font-bold text-gray-800 mb-3">ÏÇ¨Ïö© Î∞©Î≤ï</h3>
                            <ul className="space-y-2 text-sm text-gray-600">
                                <li>‚Ä¢ Î°úÎòê Ïö©ÏßÄ Ïö∞Ï∏° ÏÉÅÎã®Ïùò QR ÏΩîÎìúÎ•º Ïä§Ï∫îÌïòÏÑ∏Ïöî</li>
                                <li>‚Ä¢ ÎãπÏ≤® Îì±ÏàòÎäî ÏùºÏπòÌïòÎäî Î≤àÌò∏ Í∞úÏàòÎ°ú Í≤∞Ï†ïÎê©ÎãàÎã§</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LottoScanner />);
    </script>
</body>
</html>